{% extends "ma-layout.html" %}

{% block pageTitle %}
Create an apprenticeship advert - Your apprenticeship adverts - {{serviceName}} - GOV.UK
{% endblock %}

{% block beforeContent%}
{{super()}}
<a href="../dashboard" class="govuk-back-link">Return to your applications</a>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    {% if data.reference_num %}<span class="govuk-caption-xl">{{data.reference_num}}</span>{% endif%}
    <h1 class="govuk-heading-xl">
      Create an apprenticeship advert
    </h1>
    
    <!--<p class="govuk-body">
      Review the details that will appear in your advert. You can still make changes if you need to.<br>
      Once we've approved your advert, it will appear on â€‹the <a href="https://www.gov.uk/apply-apprenticeship" class="govuk-link" target="_blank">Find an apprenticeship service (opens in a new tab or window)</a>.
    </p>
    <p class="govuk-body"><a href="vacancy-preview" class="govuk-button" data-module="govuk-button">Preview advert</a></p>-->
    
    <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Application incomplete</h2>
    <p class="govuk-body govuk-!-margin-bottom-7">You have completed 0 of 18 sections.</p>

    <ol class="app-task-list">
      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">1. </span> Apprenticeship summary
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="title?return_url=task-list" aria-describedby="eligibility-status">
                What do you want to call this vacancy?
              </a>
            </span>
            {% if data.title %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="training-select?return_url=task-list" aria-describedby="eligibility-status">
                What training will the apprentice take?
              </a>
            </span>
            {% if data.import_no %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else %}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="select-training-provider?return_url=task-list" aria-describedby="contact-details-status">
                Have you found a training provider?
              </a>
            </span>
            {% if data.commodities and ( data.commodities | length ) > 0  or data.stock_number or data.upload or data.variety or data.number_of_packages %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else %}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="short-description?return_url=task-list" aria-describedby="contact-details-status">
                Short description of the apprenticeship
              </a>
            </span>
            {% if data.commodities and ( data.commodities | length ) > 0  or data.stock_number or data.upload or data.variety or data.number_of_packages %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else %}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="long-description?return_url=task-list" aria-describedby="contact-details-status">
                Description of the apprenticeship
              </a>
            </span>
            {% if data.commodities and ( data.commodities | length ) > 0  or data.stock_number or data.upload or data.variety or data.number_of_packages %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else %}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

        </ul>
      </li>

      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">2.</span> Employment details
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item" style="border-top:none;">
            Content explaining that the user needs to add employment details
          </li>
          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="wages?return_url=task-list" aria-describedby="contact-details-status">
                How much would you like to pay the apprentice?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="duration?return_url=task-list" aria-describedby="contact-details-status">
                Duration and working hours
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="dates?return_url=task-list" aria-describedby="contact-details-status">
                Important dates
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="location?return_url=task-list" aria-describedby="contact-details-status">
                Where will the apprentice work?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="positions?return_url=task-list" aria-describedby="contact-details-status">
                How many positions are there<!-- for this apprenticeship-->?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>
        </ul>
      </li>

      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">3.</span> Skills, qualifications and career progression
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item" style="border-top:none;">
            Content explaining that the user needs to add more information
          </li>
          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="skills?return_url=task-list" aria-describedby="contact-details-status">
                What skills and personal qualities would you like<br> the applicant to have?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>  
          
          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="qualification-question?return_url=task-list" aria-describedby="contact-details-status">
                What qualifications would you likethe applicant<br> to have?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="things-to-consider?return_url=task-list" aria-describedby="contact-details-status">
                What else would you like the applicant<br> to consider? (optional)
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

        </ul>
      </li>

      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">4.</span> About the employer
        </h2>
 
        <ul class="app-task-list__items">
          <li class="app-task-list__item" style="border-top:none;">
            Content explaining that the user needs to add employer information
          </li>
          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="employers-select?return_url=task-list" aria-describedby="list-convictions-status">
                Which organisation is this advert for?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="employer?return_url=task-list" aria-describedby="list-convictions-status">
                Which employer name do you want on your advert?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="about-employer?return_url=task-list" aria-describedby="list-convictions-status">
                Add some information about the employer
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="contact?return_url=task-list" aria-describedby="list-convictions-status">
                Add contact information for the employer
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

          <li class="app-task-list__item">
            <span class="app-task-list__task-name">
              <a href="application-process?return_url=task-list" aria-describedby="list-convictions-status">
                How would you like to receive applications?
              </a>
            </span>
            {% if data.port_entry or data.port_export or data.transport_method %}
            <strong class="govuk-tag app-task-list__tag" id="eligibility-status">Completed</strong>
            {% else%}
            <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="list-convictions-status">Not started</strong>
            {% endif %}
          </li>

        </ul>
      </li>

      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">5.</span> Check and submit your advert
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item">
            <span class="task-list-submit-disabled">
              <span class="app-task-list__task-name">
                Check your answers and submit your advert
              </span>
              <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="submit-pay-status">Cannot start yet</strong>
            </span>
            <span class="task-list-submit-enabled" style="display:none">
              <span class="app-task-list__task-name">
                <a href="check-your-answers" aria-describedby="list-convictions-status">
                  Check your answers and submit your advert
                </a>
              </span>
              <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="submit-pay-status">Not started</strong>
            </span>
          </li>
        </ul>
      </li>
    </ol>

  </div>
</div>
{% endblock %}

{% block scripts %}
{{super()}}
<script type="text/javascript">
     
    // don't disable the submit link on localhost
    let hostname = window.location.hostname;
    var urlParams = new URLSearchParams(window.location.search);

    if (hostname.indexOf('localhost') > -1 || urlParams.get('test')) {
      $('.task-list-submit-enabled').show();
      $('.task-list-submit-disabled').hide();
    }else{    
      window.addEventListener('load', function() {
        var tasks = $('.app-task-list__tag')
        var max = tasks.length - 2
        $('.task-list-max').text(max)
        var count = 0
        tasks.each(function(index, value) {
          console.log($(value).text())
          if ($(value).text() == "Completed") {
            count += 1
          }
        })
        if (count >= max-1) {
          $('.task-list-submit-enabled').show()
          $('.task-list-submit-disabled').hide()
        }
        $('.task-list-completed').text(count)
      })
    }

    $('.task-list-submit-enabled').show();
    $('.task-list-submit-disabled').hide();
</script>
{% endblock %}